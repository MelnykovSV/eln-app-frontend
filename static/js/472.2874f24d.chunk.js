"use strict";(self.webpackChunkeln_app_frontend=self.webpackChunkeln_app_frontend||[]).push([[472],{54:function(e,t,n){n.d(t,{o:function(){return i}});var a=n(1413),r=n(3433),i=function(e){var t=(0,r.Z)(e.stages);if(t.some((function(e){return null===e._yield})))return e;t.reverse();var n=t.reduce((function(e,t){return e.length?[].concat((0,r.Z)(e),[t._yield/100*e[e.length-1]]):[].concat((0,r.Z)(e),[t._yield/100])}),[]);t.reverse(),n.reverse();var i=t.map((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{yieldCoefficient:n[t+1]||1})}));return(0,a.Z)((0,a.Z)({},e),{},{stages:i,totalYieldCoefficient:n[0]})}},4472:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var a,r=n(4165),i=n(5861),o=n(4942),c=n(3433),s=n(1413),l=n(9439),d=n(168),u=n(225).Z.div(a||(a=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  @media screen and (min-width: 1280px) {\n    flex-direction: row;\n  }\n  .utility-panel {\n    .toggle-schem-preview {\n      display: block;\n\n      @media screen and (min-width: 1280px) {\n        display: none;\n      }\n    }\n  }\n\n  .new-scheme-content {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    @media screen and (min-width: 1280px) {\n      flex-direction: row;\n      align-items: stretch;\n      justify-content: center;\n    }\n    .scheme-preview-container {\n      width: 100%;\n    }\n\n    .slide {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      background-color: white;\n      display: block;\n      z-index: 10;\n\n      @media screen and (min-width: 1280px) {\n        display: none;\n      }\n    }\n    .scheme-preview-container {\n      display: none;\n\n      @media screen and (min-width: 1280px) {\n        display: block;\n      }\n    }\n  }\n"]))),h=n(8345),p=n(2791),m=n(54),f=n(3366),g=n(7462),v=n(3733),w=n(4419),Z=n(2065),x=n(4036),b=n(7278),y=n(1402),k=n(6934),S=n(5878),C=n(1217);function E(e){return(0,C.Z)("MuiSwitch",e)}var j=(0,S.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),M=n(184),z=["className","color","edge","size","sx"],N=(0,k.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat((0,x.Z)(n.edge))],t["size".concat((0,x.Z)(n.size))]]}})((function(e){var t,n=e.ownerState;return(0,g.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(t={width:40,height:24,padding:7},(0,o.Z)(t,"& .".concat(j.thumb),{width:16,height:16}),(0,o.Z)(t,"& .".concat(j.switchBase),(0,o.Z)({padding:4},"&.".concat(j.checked),{transform:"translateX(16px)"})),t))})),R=(0,k.ZP)(b.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,(0,o.Z)({},"& .".concat(j.input),t.input),"default"!==n.color&&t["color".concat((0,x.Z)(n.color))]]}})((function(e){var t,n=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:"".concat("light"===n.palette.mode?n.palette.common.white:n.palette.grey[300]),transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},(0,o.Z)(t,"&.".concat(j.checked),{transform:"translateX(20px)"}),(0,o.Z)(t,"&.".concat(j.disabled),{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:"".concat("light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600])}),(0,o.Z)(t,"&.".concat(j.checked," + .").concat(j.track),{opacity:.5}),(0,o.Z)(t,"&.".concat(j.disabled," + .").concat(j.track),{opacity:n.vars?n.vars.opacity.switchTrackDisabled:"".concat("light"===n.palette.mode?.12:.2)}),(0,o.Z)(t,"& .".concat(j.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,a=e.ownerState;return(0,g.Z)({"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,Z.Fq)(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&(t={},(0,o.Z)(t,"&.".concat(j.checked),(0,o.Z)({color:(n.vars||n).palette[a.color].main,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[a.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,Z.Fq)(n.palette[a.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(j.disabled),{color:n.vars?n.vars.palette.Switch["".concat(a.color,"DisabledColor")]:"".concat("light"===n.palette.mode?(0,Z.$n)(n.palette[a.color].main,.62):(0,Z._j)(n.palette[a.color].main,.55))})),(0,o.Z)(t,"&.".concat(j.checked," + .").concat(j.track),{backgroundColor:(n.vars||n).palette[a.color].main}),t))})),T=(0,k.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),B=(0,k.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),_=p.forwardRef((function(e,t){var n=(0,y.Z)({props:e,name:"MuiSwitch"}),a=n.className,r=n.color,i=void 0===r?"primary":r,o=n.edge,c=void 0!==o&&o,s=n.size,l=void 0===s?"medium":s,d=n.sx,u=(0,f.Z)(n,z),h=(0,g.Z)({},n,{color:i,edge:c,size:l}),p=function(e){var t=e.classes,n=e.edge,a=e.size,r=e.color,i=e.checked,o=e.disabled,c={root:["root",n&&"edge".concat((0,x.Z)(n)),"size".concat((0,x.Z)(a))],switchBase:["switchBase","color".concat((0,x.Z)(r)),i&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},s=(0,w.Z)(c,E,t);return(0,g.Z)({},t,s)}(h),m=(0,M.jsx)(B,{className:p.thumb,ownerState:h});return(0,M.jsxs)(N,{className:(0,v.Z)(p.root,a),sx:d,ownerState:h,children:[(0,M.jsx)(R,(0,g.Z)({type:"checkbox",icon:m,checkedIcon:m,ref:t,ownerState:h},u,{classes:(0,g.Z)({},p,{root:p.switchBase})})),(0,M.jsx)(T,{className:p.track,ownerState:h})]})})),D=n(8875),P=n(3199),I=n(2071),O=n(3967),Y=n(4999),H=n(7602),L=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function X(e,t,n){var a,r=function(e,t,n){var a,r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,H.Z)(t);if(t.fakeTransform)a=t.fakeTransform;else{var c=o.getComputedStyle(t);a=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}var s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){var d=a.split("(")[1].split(")")[0].split(",");s=parseInt(d[4],10),l=parseInt(d[5],10)}return"left"===e?"translateX(".concat(i?i.right+s-r.left:o.innerWidth+s-r.left,"px)"):"right"===e?"translateX(-".concat(i?r.right-i.left-s:r.left+r.width-s,"px)"):"up"===e?"translateY(".concat(i?i.bottom+l-r.top:o.innerHeight+l-r.top,"px)"):"translateY(-".concat(i?r.top-i.top+r.height-l:r.top+r.height-l,"px)")}(e,t,"function"===typeof(a=n)?a():a);r&&(t.style.webkitTransform=r,t.style.transform=r)}var F=p.forwardRef((function(e,t){var n=(0,O.Z)(),a={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},i=e.addEndListener,o=e.appear,c=void 0===o||o,s=e.children,l=e.container,d=e.direction,u=void 0===d?"down":d,h=e.easing,m=void 0===h?a:h,v=e.in,w=e.onEnter,Z=e.onEntered,x=e.onEntering,b=e.onExit,y=e.onExited,k=e.onExiting,S=e.style,C=e.timeout,E=void 0===C?r:C,j=e.TransitionComponent,z=void 0===j?D.ZP:j,N=(0,f.Z)(e,L),R=p.useRef(null),T=(0,I.Z)(s.ref,R,t),B=function(e){return function(t){e&&(void 0===t?e(R.current):e(R.current,t))}},_=B((function(e,t){X(u,e,l),(0,Y.n)(e),w&&w(e,t)})),F=B((function(e,t){var a=(0,Y.C)({timeout:E,style:S,easing:m},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,g.Z)({},a)),e.style.transition=n.transitions.create("transform",(0,g.Z)({},a)),e.style.webkitTransform="none",e.style.transform="none",x&&x(e,t)})),V=B(Z),q=B(k),A=B((function(e){var t=(0,Y.C)({timeout:E,style:S,easing:m},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),X(u,e,l),b&&b(e)})),K=B((function(e){e.style.webkitTransition="",e.style.transition="",y&&y(e)})),W=p.useCallback((function(){R.current&&X(u,R.current,l)}),[u,l]);return p.useEffect((function(){if(!v&&"down"!==u&&"right"!==u){var e=(0,P.Z)((function(){R.current&&X(u,R.current,l)})),t=(0,H.Z)(R.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[u,v,l]),p.useEffect((function(){v||W()}),[v,W]),(0,M.jsx)(z,(0,g.Z)({nodeRef:R,onEnter:_,onEntered:V,onEntering:F,onExit:A,onExited:K,onExiting:q,addEndListener:function(e){i&&i(R.current,e)},appear:c,in:v,timeout:E},N,{children:function(e,t){return p.cloneElement(s,(0,g.Z)({ref:T,style:(0,g.Z)({visibility:"exited"!==e||v?void 0:"hidden"},S,s.props.style)},t))}}))})),V=n(4989),q=n(841),A=n(7689),K={startingMaterial:"",product:"",solvent:"",temp:null,time:"",_yield:null,methodic:""},W=function(){var e=(0,p.useState)(""),t=(0,l.Z)(e,2),n=t[0],a=t[1],d=(0,p.useState)(""),f=(0,l.Z)(d,2),g=f[0],v=f[1],w=(0,p.useState)(""),Z=(0,l.Z)(w,2),x=Z[0],b=Z[1],y=(0,p.useState)(""),k=(0,l.Z)(y,2),S=k[0],C=k[1],E=(0,p.useState)(1),j=(0,l.Z)(E,2),z=j[0],N=j[1],R=(0,p.useState)(!1),T=(0,l.Z)(R,2),B=T[0],D=T[1],P=(0,p.useState)(""),I=(0,l.Z)(P,2),O=I[0],Y=I[1],H=(0,p.useState)([(0,s.Z)({},K)]),L=(0,l.Z)(H,2),X=L[0],W=L[1];(0,p.useEffect)((function(){Y(X[X.length-1].product)}),[X]);var $=(0,A.s0)(),G={startingMaterial:a,mass:v,price:b},J=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),X[0].startingMaterial=n,e.next=4,q.mK.post("/api/schemes/",{startingMaterial:n,targetCompound:X[X.length-1].product,mass:g,price:x,deadline:S,stages:X});case 4:a=e.sent,$("/scheme/".concat(a.data.data._id));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsxs)(u,{className:"container",children:[(0,M.jsx)("div",{className:"utility-panel",children:(0,M.jsx)(V.Z,{className:"toggle-schem-preview",control:(0,M.jsx)(_,{checked:B,onChange:function(){D(!B)}}),label:"Show scheme preview"})}),(0,M.jsxs)("div",{className:"new-scheme-content",children:[(0,M.jsx)(F,{direction:"right",in:B,mountOnEnter:!0,unmountOnExit:!0,className:"slide",children:(0,M.jsx)("div",{className:"mobile-scheme-preview-container",children:(0,M.jsx)(h.g1,{schemeData:(0,m.o)({startingMaterial:n,targetCompound:O,mass:Number(g),stages:X})})})}),(0,M.jsx)("div",{className:"scheme-preview-container",children:(0,M.jsx)(h.g1,{schemeData:(0,m.o)({startingMaterial:n,targetCompound:O,mass:Number(g),stages:X})})}),(0,M.jsx)(h.IV,{startingMaterial:n,mass:g,price:x,deadline:S,stageNumber:z,targetCompound:O,stages:X,stageChangeHandler:function(e,t){W((0,c.Z)(X).map((function(n,a){return t-1===a?(0,s.Z)((0,s.Z)({},X[a]),{},(0,o.Z)({},e.target.name,e.target.value)):n})))},addStageHandler:function(){var e=X[X.length-1].product;W([].concat((0,c.Z)(X),[(0,s.Z)((0,s.Z)({},K),{},{startingMaterial:e})])),N(z+1)},handleChange:function(e){N(Number(e.target.value))},schemeFormSubmitHandler:J,inputChangeHandler:function(e){var t=e.target.name;G[t](e.target.value)},deadlineChangeHandler:function(e){e&&C(e.format("DD.MM.YYYY"))}})]})]})}}}]);
//# sourceMappingURL=472.2874f24d.chunk.js.map